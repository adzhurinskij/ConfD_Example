//>>built
define("dojox/charting/plot2d/commonStacked",["dojo/_base/lang","dojox/lang/functional","./common"],function(m,p,q){var n=m.getObject("dojox.charting.plot2d.commonStacked",!0);return m.mixin(n,{collectStats:function(l,k){for(var d=m.delegate(q.defaultStats),h=0;h<l.length;++h)for(var f=l[h],e=0;e<f.data.length;e++){var a,b;k(f.data[e])||("number"==typeof f.data[e]||!f.data[e].hasOwnProperty("x")?(b=n.getIndexValue(l,h,e,k),a=e+1):(a=f.data[e].x,null!==a&&(b=n.getValue(l,h,a,k),b=null!==b&&b.y?b.y:
null)),d.hmin=Math.min(d.hmin,a),d.hmax=Math.max(d.hmax,a),d.vmin=Math.min(d.vmin,b),d.vmax=Math.max(d.vmax,b))}return d},rearrangeValues:function(l,k,d){var h=p.filter(l,"x"),f=h.length;if(!f)return l;for(var e={},a=0;a<f;++a){for(var b=h[a],c=b.min,g=b.max;c<g;++c)b[c]=(b[c]||0)+(e[c]||0);e=b}for(a=0;a<f;++a){b=h[a];c=b.min;for(g=b.max;c<g;++c)b[c]=this.isNullValue(b[c])?0:k(b[c])-d}if(this.opt.minWidth){k=this.opt.minWidth;for(a=f-1;a;--a){b=h[a];e=h[a-1];c=b.min;for(g=b.max;c<g;++c)b[c]-=e[c]}e=
b.max;for(c=b.min;c<e;++c){for(a=d=b=0;a<f;++a)g=h[a][c],0<g&&(b+=g,++d);if(b<=d*k)for(a=0;a<f;++a)g=h[a][c],0<g&&(h[a][c]=k);else{for(a=d=0;a<f;++a)b=h[a],g=b[c],0<g&&(g<k?(d+=k-g,b[c]=k):0<d&&(g=b[c]-k,g>=d?(b[c]-=d,d=0):0<g&&(b[c]=k,d-=g)));if(0<d)for(a=f-1;0<=a;--a)if(b=h[a],g=b[c],0<g)if(g=b[c]-k,g>=d){b[c]-=d;break}else 0<g&&(b[c]=k,d-=g)}}for(a=1;a<f;++a){b=h[a];e=h[a-1];c=b.min;for(g=b.max;c<g;++c)b[c]+=e[c]}}return l},getIndexValue:function(l,k,d,h){var f=0,e,a;for(a=0;a<=k;++a)e=l[a].data[d],
h(e)||(isNaN(e)&&(e=e.y||0),f+=e);return f},getValue:function(l,k,d,h){var f=null,e,a;for(e=0;e<=k;++e)for(a=0;a<l[e].data.length;a++)if(v=l[e].data[a],!h(v))if(v.x==d){f||(f={x:d});null!=v.y&&(null==f.y&&(f.y=0),f.y+=v.y);break}else if(v.x>d)break;return f}})});
//# sourceMappingURL=commonStacked.js.map